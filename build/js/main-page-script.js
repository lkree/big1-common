"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r,n=0;n<t.length;n++)(r=t[n]).enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}}window.hrefChecker={laximoBreadcrumbs:function(){var e;try{e=href[4].split("?")[0]}catch(t){e=href[4]}return"original-catalog"===href[3]?["isuzu","kia","mercedes","daf","man","volvo","hyundai","iveco","renault","scania","toyota","bmw","mitsubishi","skoda","volkswagen","ford","nissan","audi","mazda","chevrolet","opel"].includes(e)&&!href[5]:!("original-catalog"!==href[3]||"car-parts"!==href[4].slice(0,9)||void 0!==href[5])||!("original-catalog"!==href[3]||"truck-parts"!==href[4].slice(0,11)||void 0!==href[5])},laximoScrolling:function(){return"original-catalog"===href[3]&&"car-parts"===href[4].slice(0,9)&&void 0===href[5]||!("original-catalog"!==href[3]||"truck-parts"!==href[4].slice(0,11)||void 0!==href[5])},mainPage:function(){return"big1.ru"===href[2].slice(0,7)&&!href[3]||"big1.ru"===href[2].slice(0,7)&&"?"===href[3].slice(0,1)},laximoMainPage:function(){return"laximo"===href[3].slice(0,6)&&void 0===href[4]},tecdcocBreadCrumbs:function(){if("car_base"===href[3]&&void 0!==href[4]){if("truck-parts"===href[4].slice(0,11))return!0;if("car-parts"===href[4].slice(0,9))return!0}return!1},autoChooser:function(){return!("fast-auto-chooser"!==href[3]||void 0===href[4]||"truck"!==href[4].slice(0,5)&&"car"!==href[4].slice(0,3))},bigService:function(){return"vin_query_parts"===href[3].slice(0,15)},tecDocLinksProfileCreator:function(){return"autos"===href[3].slice(0,5)&&void 0===href[4]},vinAutoInfoGetter:function(){return"any_autos"===href[3].slice(0,9)},registrationForm:function(){return"customers"===href[3].slice(0,9)&&void 0===href[4]}};var cities={41:"Ярославль, ул. Урицкого 47а",28:"Ярославль, ул. Полушкина роща 16Л",37:"г. Екатеринбург, Железнодорожный район (Старая сортировка), ул.Билимбаевская, д.4"},href=window.location.href.split("/"),isLoggedIn=!!document.querySelector(".b-link-perscab"),getCookie=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},saveCookie=function(e,t){var r={path:"/",secure:!0,"max-age":new Date(Date.now()+864e7)},n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var i in r){n+="; "+i;var o=r[i];!0!==o&&(n+="="+o)}document.cookie=n},params=location.href.split("?")[1],paramId=new URLSearchParams(params).get("id"),createBreadCrumbs=function(e,t){try{var r=document.querySelector(".path"),n=r.childNodes[0].cloneNode(!0);n.childNodes[0].childNodes[0].textContent=e,n.childNodes[0].title=e,n.childNodes[0].href=t,r.insertBefore(n,r.childNodes[1]),r.childNodes[1].childNodes[0].childNodes[1].setAttribute("content","1"),r.childNodes[2].childNodes[1].setAttribute("content","2")}catch(e){var i=e.message;console.log(i)}},mobileMenuReconstruct=function(){$(".header-wrapper .b-tsd-nav-list").prepend('<li>\n      <a href="/laximo">Каталоги оригинальных запчастей</a>\n      <ul>\n        <li><a href="/original-catalog/truck-parts">Грузовой</a></li>\n        <li><a href="/original-catalog/car-parts">Легковой</a></li>\n        <li><a href="/laximo">Общий</a></li>\n      </ul>\n    </li>\n    <li>\n      <a href="/car_base.html">Каталоги неоригинальных запчастей</a>\n      <ul>\n        <li><a href="/car_base/truck-parts">Грузовой</a></li>\n        <li><a href="/car_base/car-parts">Легковой</a></li>\n        <li><a href="/car_base.html">Общий</a></li>\n      </ul>\n    </li>\n    <li>\n      <a href="/fast-auto-chooser/">Подобрать свой автомобиль</a>\n      <ul>\n        <li><a href="/fast-auto-chooser/truck">Грузовой</a></li>\n        <li><a href="/fast-auto-chooser/car">Легковой</a></li>\n        <li><a href="/fast-auto-chooser/">Общий</a></li>\n      </ul>\n    </li>\n    <li>\n      <a href="/catalog/to.html">Каталог ТО</a>\n    </li>')},scrollLaximo=function(){document.querySelector(".lx-sbm-list").addEventListener("click",function(e){var t=e.target;["li","em","img"].includes(t.localName)&&function(){var e=document.body.offsetTop;$("html,body").animate({scrollTop:e},500)}()})},setDiscounts=function(){_toConsumableArray(document.querySelector(".b-prod-carousel .slick-list .slick-track").querySelectorAll(".slick-slide")).forEach(function(e){var t,r=e.children[1].children[1],n=r.cloneNode(!0);t=parseInt(n.textContent),t=(t=Math.ceil(1.07*t)).toLocaleString(),n.textContent="".concat(t,".0 p"),n.style.textDecoration="red line-through",r.textContent="".concat(parseInt(r.textContent).toLocaleString(),".0 p"),e.children[1].insertBefore(n,r)})},contactsLinkChanger=function(){_toConsumableArray(document.querySelectorAll(".b-tsd-nav-list > li a")).forEach(function(e){var t=e.textContent,r=e.href;"Контакты"===t&&(document.querySelector(".fast-menu-tabs__li-first-level:last-of-type a").href=r)})};window.userCityHandler=function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.cityName,r=e.cityId,n=document.querySelector("a.b-tsd-city-link");try{var i=function(){return i.setTextCityName=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{e=YMaps.location.city}catch(e){}return t=t||getCookie("deliveryCity")||e||"Ярославль",n.textContent=t,i},i.setCookieCityId=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"28";return saveCookie("region_id",e),i},i};i().setTextCityName(t).setCookieCityId(r)}catch(e){var o=e.message;console.log(o)}};var closeLoginMenu=function(){return document.querySelector(".b-enter-link").click()},mobileMenuController=function(){var e=document.querySelector(".mobile-menu"),t=document.querySelector(".b-tsd-tb__close"),r=function(){var e=$(".b-tsd-tb");return"none"===e.css("display")?(e.slideDown(500),void e.css({display:"flex"})):void e.slideUp(500)};e.addEventListener("click",r),t.addEventListener("click",r)},setCity=function(e){isLoggedIn||(saveCookie("region_id",e),saveCookie("deliveryAddress",cities[e]),location.assign("/"))};paramId&&setCity(paramId),hrefChecker.laximoBreadcrumbs()&&createBreadCrumbs("Оригинальные каталоги","/laximo"),hrefChecker.tecdcocBreadCrumbs()&&createBreadCrumbs("Каталог неоригинальных запчастей","/car_base.html"),hrefChecker.autoChooser()&&createBreadCrumbs("Быстрый подбор автомобиля","/fast-auto-chooser"),768>window.innerWidth&&mobileMenuReconstruct(),mobileMenuController(),(hrefChecker.laximoMainPage()||hrefChecker.laximoScrolling())&&scrollLaximo(),hrefChecker.mainPage()&&document.addEventListener("DOMContentLoaded",function(){return setTimeout(setDiscounts,0)}),isLoggedIn||document.querySelector(".main-popup-reg__close").addEventListener("click",closeLoginMenu),contactsLinkChanger(),document.addEventListener("DOMContentLoaded",window.userCityHandler),getCookie("cookiePolicyAccept")||setTimeout(function(){var e=document.querySelector(".cookiesAgreement-module-close"),t=document.querySelector(".cookiesAgreement-module");t.classList.toggle("hidden"),e.addEventListener("click",function(){var e=new Date((new Date).getTime()+31536e6);document.cookie="cookiePolicyAccept=1; expires=".concat(e.toUTCString(),"; secure"),t.classList.toggle("hidden")})},7e3);var liFirstLevel=document.querySelectorAll(".fast-menu-tabs__li-first-level"),liSecondLevel=document.querySelectorAll(".fast-menu-tabs__li-second-level"),liThirdLevel=document.querySelectorAll(".fast-menu-tabs__li-third-level"),allLi=document.querySelectorAll(".fast-menu-tabs__ul-first-level li"),liSwitcher=function(e,t){t.stopPropagation();var r=t.target,n=t.currentTarget,i=r.children?r.children[0]:null;i&&"a"===i.localName&&document.location.assign(i.href);var o,a=_toConsumableArray(document.querySelectorAll(e)),l=n.querySelector(e);o=null!==l&&l.classList.contains("hidden"),a.forEach(function(e){return e.classList.add("hidden")}),o&&l.classList.remove("hidden")},eventListenerAdder=function(e,t,r){var n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)a.value.addEventListener("click",function(e){return r?t(r,e):e[t]()})}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}};function closeAllActiveLi(){var e=document.querySelectorAll(".fast-menu-tabs__ul-first-level ul");Array.from(e).forEach(function(e){return e.classList.add("hidden")})}eventListenerAdder(liFirstLevel,liSwitcher,".fast-menu-tabs__ul-second-level"),eventListenerAdder(liSecondLevel,liSwitcher,".fast-menu-tabs__ul-third-level"),eventListenerAdder(liThirdLevel,"stopPropagation"),document.addEventListener("click",closeAllActiveLi),document.addEventListener("keydown",function(e){27===e.keyCode&&closeAllActiveLi()}),hrefChecker.mainPage()&&function(){var e=function(){function e(t,r,n,i,o){var a=!!(5<arguments.length&&void 0!==arguments[5])&&arguments[5],l=!!(6<arguments.length&&void 0!==arguments[6])&&arguments[6];_classCallCheck(this,e),this.prevBtn=t,this.nextBtn=r,this.slider=n,this.maxStatus=this.setMaxStatus(o),this.minStatus=i,this.currentStatus=this.minStatus,this.stateX="enable",this.slidesCount=o,this.initialAutoMoving=a,this.autoMoveControllerId,this.timerActive,this.autoMoveId,this.scrollAmountAuto=l}return _createClass(e,[{key:"init",value:function(){var e=this;this.nextBtn.on("click",function(){e.activate("next",!1,!1)}),this.prevBtn.on("click",function(){e.activate("prev",!1,!1)}),$(window).on("resize",function(){var t=e.slider[0].children.length;e.maxStatus=e.setMaxStatus(t),e.btnsController()}),$(document).on("DOMContentLoaded",function(){e.btnsController()}),this.slider.on("touchstart",function(t){e.touchMover(t,e.slider)}),this.initialAutoMoving&&this.autoMoveController()}},{key:"setMaxStatus",value:function(e){var t=window.innerWidth;switch(!0){case 1e3<t:return-(100/e*(e-5)).toFixed(2);case 800<t:return-(100/e*(e-4)).toFixed(2);case 600<t:return-(100/e*(e-3)).toFixed(2);case 450<t:return-(100/e*(e-2)).toFixed(2);default:return-(100/e*(e-1)).toFixed(2)}}},{key:"getMaxStatus",value:function(){return this.maxStatus}},{key:"getScrollAmount",value:function(){var e=window.innerWidth;switch(!0){case 1e3<e:return 5;case 800<e:return 4;case 600<e:return 3;case 450<e:return 2;default:return 1}}},{key:"btnSwitcher",value:function(e,t){return"on"===t?(e.removeClass("b-yel-cat__slider-btn--deactive"),void e.removeAttr("disabled")):(e.addClass("b-yel-cat__slider-btn--deactive"),void e.attr("disabled",""))}},{key:"btnsController",value:function(){this.btnSwitcher(this.prevBtn,"on"),this.btnSwitcher(this.nextBtn,"on"),this.stateX="enable",this.currentStatus>=this.minStatus&&(this.btnSwitcher(this.prevBtn,"off"),this.stateX="begin"),this.currentStatus<=this.maxStatus&&(this.btnSwitcher(this.nextBtn,"off"),this.stateX="end")}},{key:"sliderMove",value:function(){this.slider.css("transform","translateX(".concat(this.currentStatus,"%)"))}},{key:"setCurrentStatus",value:function(e){this.currentStatus=e}},{key:"rollCountHandler",value:function(e){var t=Math.round;return!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1]?"prev"===e?this.minStatus:this.maxStatus:"next"===e?this.currentStatus<=this.maxStatus?this.currentStatus:this.currentStatus-t(100/this.slidesCount*100)/100:this.currentStatus>=this.minStatus?this.currentStatus:this.currentStatus+t(100/this.slidesCount*100)/100}},{key:"activate",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this.scrollAmountAuto&&(this.scrollAmount=this.getScrollAmount());for(var n,i=r?1:this.scrollAmount?this.scrollAmount:1,o=0;o<i;++o)n=this.rollCountHandler(e,t),this.autoMoveController(r),this.setCurrentStatus(n),this.sliderMove(),this.btnsController()}},{key:"touchMover",value:function(e,t){var r,n,i=this,o=e.originalEvent.timeStamp,a=e.originalEvent.touches[0].clientX,l=function(e){t.off("touchend",l),n=e.originalEvent.changedTouches[0].clientX,r=e.originalEvent.timeStamp;var c=a-n,s=((r-o)/1e3).toFixed(2);return 0<c?"end"===i.stateX?void 0:void(s>.8?i.activate("next",!0,!1):i.activate("next",!1,!1)):void("begin"!==i.stateX&&(s>.8?i.activate("prev",!0,!1):i.activate("prev",!1,!1)))};t.on("touchend",l)}},{key:"autoMoveController",value:function(){var e=this;if(!(!(0<arguments.length&&void 0!==arguments[0])||arguments[0]))return this.autoMoveControllerId=clearTimeout(this.autoMoveControllerId),this.timerActive=!1,void this.autoMove(!0);this.timerActive||this.autoMoveControllerId||(this.timerActive=!0,this.autoMoveControllerId=setTimeout(function(){return e.autoMove(!1)},17e3))}},{key:"autoMove",value:function(){var e=this;if(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])return this.autoMoveId=clearInterval(this.autoMoveId),void this.autoMoveController(!0);if(!this.autoMoveId){this.autoMoveId=setInterval(function(){return e.currentStatus<=e.maxStatus?void e.activate("prev",!0):void e.activate("next",!1)},3e3)}}}]),e}(),t=new e($("#b-yel-cat__slider-btn--prev-truck"),$("#b-yel-cat__slider-btn--next-truck"),$("#main-slider-truck"),0,$("#main-slider-truck")[0].children.length,!0,!0),r=new e($("#b-yel-cat__slider-btn--prev-car"),$("#b-yel-cat__slider-btn--next-car"),$("#main-slider-car"),0,$("#main-slider-car")[0].children.length,!0,!0);t.init(),r.init()}();