"use strict";var form=document.querySelector("#new_customer"),onFormSubmit=function(e){var n=function(){var r,t,o,u=function(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return n[e]})};return n.checkRegion=function(){var e=function(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}("region_id");return("41"===e||"43"===e||"44"===e)&&(o=!0),n},n.getUserInfo=function(){return o?n:(r=[u(e.target.querySelector("#customer_name").value)||"",u(e.target.querySelector("#customer_contact_attributes_phone").value)||"",u(e.target.querySelector("#customer_email").value)||"",u(e.target.querySelector("#customer_family_name").value)||""],n)},n.handleInfo=function(){return o?n:(function(){var e,n=function(){return n};return n.replaceChars=function(){return e=r.map(function(e){return function(e){var n={" ":"+","@":"%40"};return e.replace(/[@ ]/g,function(e){return n[e]})}(e)}),e=_.object(["name","phone","email","surname"],e),n},n.prepareQuery=function(){var r,o,u,c=e,a=c.name,i=c.email,f=c.phone,l=c.surname,m=function(e){var n=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return n?decodeURIComponent(n[1]):void 0}("utm_source");return a=a?"fields%5BNAME%5D=".concat(a,"&"):"",f=f?"&fields%5BPHONE%5D%5B0%5D%5BVALUE%5D=".concat(f,"&fields%5BPHONE%5D%5B0%5D%5BVALUE_TYPE%5D=WORK&"):"",i=i?"fields%5BEMAIL%5D%5B0%5D%5BVALUE%5D=".concat(i,"&fields%5BEMAIL%5D%5B0%5D%5BVALUE_TYPE%5D=HOME&"):"",o="fields%5BSOURCE_ID%5D=WEB&",r="TITLE%5D=%D0%A0%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F+%D0%BD%D0%B0+big1.ru+".concat(e.name,"&"),l="fields%5BLAST_NAME%5D=".concat(l,"&"),u=m?"fields%5BUTM_SOURCE%5D=".concat(m):"",t=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(function(e,n){return e+n})}("fields%5B",r,o,a,f,i,l,u),n},n}().replaceChars().prepareQuery(),n)},n.sendData=function(){if(o)return n;var e=new XMLHttpRequest;return e.open("POST","https://avtodizel.bitrix24.ru/rest/391/8ttk4n73qu03obq6/crm.lead.add.json/"),e.send(t),n},n};n().checkRegion().getUserInfo().handleInfo().sendData()};form.addEventListener("submit",onFormSubmit);